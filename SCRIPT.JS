const questions = [
    {
        question: "O que define a Idade M√©dia?",
        options: [
            "Um per√≠odo hist√≥rico do s√©culo V ao s√©culo XV.",
            "A Revolu√ß√£o Industrial.",
            "O Renascimento.",
            "A era dos descobrimentos."
        ],
        answer: 0
    },
    {
        question: "Qual evento √© considerado o marco inicial da Idade M√©dia?",
        options: [
            "A descoberta da Am√©rica.",
            "A constru√ß√£o da Grande Muralha da China.",
            "A queda do Imp√©rio Romano do Ocidente.",
            "A Revolu√ß√£o Francesa."
        ],
        answer: 2
    },
    {
        question: "O que foi o feudalismo?",
        options: [
            "Uma escola de pensamento.",
            "Uma forma de governo.",
            "Um sistema social e econ√¥mico.",
            "Uma religi√£o."
        ],
        answer: 2
    },
    {
        question: "Quem foi Carlos Magno?",
        options: [
            "Um famoso artista.",
            "Um fil√≥sofo grego.",
            "Rei dos Francos que unificou a Europa.",
            "Um imperador romano."
        ],
        answer: 2
    },
    {
        question: "O que eram as Cruzadas?",
        options: [
            "Viagens comerciais.",
            "Eventos culturais.",
            "Expedi√ß√µes militares para a Terra Santa.",
            "Descobrimentos de novas terras."
        ],
        answer: 2
    },
    {
        question: "Quem foi o respons√°vel pela cria√ß√£o da Inquisi√ß√£o?",
        options: [
            "O Papa.",
            "Carlos Magno.",
            "O Imperador Romano.",
            "Os vikings."
        ],
        answer: 0
    },
    {
        question: "Qual era a principal religi√£o da Idade M√©dia?",
        options: [
            "O Juda√≠smo.",
            "O Cristianismo.",
            "O Islamismo.",
            "O Budismo."
        ],
        answer: 1
    },
    {
        question: "Qual dos seguintes castelos √© famoso na Idade M√©dia?",
        options: [
            "Castelo de Windsor.",
            "Castelo de Neuschwanstein.",
            "Castelo de Dracula.",
            "Castelo de Hogwarts."
        ],
        answer: 0
    },
    {
        question: "O que eram as guildas?",
        options: [
            "Organiza√ß√µes de comerciantes e artes√£os.",
            "Reuni√µes de nobres.",
            "Escolas de filosofia.",
            "Ex√©rcitos medievais."
        ],
        answer: 0
    },
    {
        question: "O que era o suserano?",
        options: [
            "Um agricultor.",
            "Um nobre que protegia vassalos.",
            "Um tipo de mercador.",
            "Um cavaleiro."
        ],
        answer: 1
    },
    {
        question: "Qual foi a import√¢ncia da Peste Negra?",
        options: [
            "Aumento populacional.",
            "Diminui√ß√£o da popula√ß√£o e mudan√ßas sociais.",
            "Fim da Idade M√©dia.",
            "In√≠cio das Cruzadas."
        ],
        answer: 1
    },
    {
        question: "Quem eram os monges?",
        options: [
            "L√≠deres militares.",
            "Pessoas que dedicavam suas vidas √† religi√£o.",
            "Artistas.",
            "Nobres."
        ],
        answer: 1
    },
    {
        question: "Qual foi uma das principais universidades da Idade M√©dia?",
        options: [
            "Universidade de Oxford.",
            "Universidade de Harvard.",
            "Universidade de Yale.",
            "Universidade de Stanford."
        ],
        answer: 0
    },
    {
        question: "Qual foi um importante livro da Idade M√©dia?",
        options: [
            "O Pr√≠ncipe de Maquiavel.",
            "A Divina Com√©dia de Dante.",
            "Dom Quixote.",
            "Os Lus√≠adas."
        ],
        answer: 1
    },
    {
        question: "O que era a vassalagem?",
        options: [
            "Uma forma de governo.",
            "Um sistema de prote√ß√£o entre senhores e vassalos.",
            "Uma religi√£o.",
            "Uma pr√°tica comercial."
        ],
        answer: 1
    },
    {
        question: "Quem era Jo√£o Sem Terra?",
        options: [
            "Um rei que assinou a Magna Carta.",
            "Um famoso artista.",
            "Um fil√≥sofo grego.",
            "Um l√≠der militar."
        ],
        answer: 0
    },
    {
        question: "Qual foi a fun√ß√£o das catedrais na Idade M√©dia?",
        options: [
            "Escolas.",
            "Centros administrativos.",
            "Igrejas e centros de comunidade.",
            "Mercados."
        ],
        answer: 2
    },
    {
        question: "O que eram os trovadores?",
        options: [
            "Artistas que compunham m√∫sicas e poemas.",
            "Guerreiros.",
            "Cientistas.",
            "Monges."
        ],
        answer: 0
    },
    {
        question: "Qual a import√¢ncia da Idade M√©dia para a hist√≥ria?",
        options: [
            "Foi um per√≠odo de estagna√ß√£o.",
            "Foi crucial para a forma√ß√£o da Europa moderna.",
            "N√£o teve import√¢ncia.",
            "Foi a √©poca do Renascimento."
        ],
        answer: 1
    }
];

let currentQuestionIndex = 0;
let score = 0;

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

function loadQuestion() {
    const questionElement = document.getElementById("question");
    const optionsElement = document.getElementById("options");
    const nextButton = document.getElementById("next-button");
    const resultElement = document.getElementById("result");

    const currentQuestion = questions[currentQuestionIndex];
    questionElement.textContent = currentQuestion.question;

    // Embaralhar as op√ß√µes
    const shuffledOptions = [...currentQuestion.options];
    shuffleArray(shuffledOptions);

    // Manter o √≠ndice da resposta correta
    const correctAnswerIndex = currentQuestion.options.indexOf(currentQuestion.options[currentQuestion.answer]);

    optionsElement.innerHTML = '';
    shuffledOptions.forEach((option) => {
        const button = document.createElement("button");
        button.textContent = option;
        button.classList.add("option");
        button.onclick = () => checkAnswer(option, currentQuestion, shuffledOptions, correctAnswerIndex);
        optionsElement.appendChild(button);
    });

    nextButton.classList.add("hidden");
    resultElement.textContent = '';
}

function checkAnswer(selectedOption, currentQuestion, shuffledOptions, correctAnswerIndex) {
    const resultElement = document.getElementById("result");
    const nextButton = document.getElementById("next-button");
    const options = document.querySelectorAll(".option");
    const scoreDisplay = document.getElementById("score");

    options.forEach((button, index) => {
        if (shuffledOptions[index] === currentQuestion.options[currentQuestion.answer]) {
            button.classList.add("correct");
        } else {
            button.classList.add("incorrect");
        }
    });

    if (selectedOption === currentQuestion.options[currentQuestion.answer]) {
        resultElement.textContent = "Voc√™ acertou! üçê";
        score++; // Incrementa a pontua√ß√£o apenas se a resposta estiver correta
    } else {
        resultElement.textContent = "Voc√™ errou! üí©";
    }

    // Atualizar a pontua√ß√£o exibida
    scoreDisplay.textContent = score;

    // Mostrar bot√£o de pr√≥xima pergunta apenas se n√£o for a √∫ltima pergunta
    if (currentQuestionIndex < questions.length - 1) {
        nextButton.classList.remove("hidden");
    } else {
        nextButton.textContent = "Ver Resultados";
        nextButton.classList.remove("hidden");
    }
}

document.getElementById("next-button").onclick = () => {
    currentQuestionIndex++;
    if (currentQuestionIndex < questions.length) {
        loadQuestion();
    } else {
        showFinalResult();
    }
};

// Exibir o resultado final
function showFinalResult() {
    const finalScore = score; // Cada resposta correta vale 1 ponto
    document.getElementById("result").textContent = `Voc√™ terminou o jogo! Sua pontua√ß√£o: ${finalScore}`;
}

// Carregar a primeira pergunta
loadQuestion();

const rainButton = document.getElementById('rainButton');
const emojiContainer = document.getElementById('emojiContainer');

rainButton.addEventListener('click', () => {
    for (let i = 0; i < 20; i++) { // Altere o n√∫mero para mais ou menos emojis
        createEmoji();
    }
});

function createEmoji() {
    const emoji = document.createElement('div');
    emoji.classList.add('emoji');
    emoji.textContent = 'üí©';

    const randomX = Math.random() * window.innerWidth;
    emoji.style.left = `${randomX}px`;
    
    emojiContainer.appendChild(emoji);

    // Remove o emoji ap√≥s a anima√ß√£o
    emoji.addEventListener('animationend', () => {
        emoji.remove();
    });
}
